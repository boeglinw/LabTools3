
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>box &#8212; LabTools3 1.1.3 documentation</title>
    <link rel="stylesheet" href="../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="datafile" href="lt_datafile.html" />
    <link rel="prev" title="The LT Package" href="../LT.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="lt_datafile.html" title="datafile"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../LT.html" title="The LT Package"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">LabTools3 1.1.3 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../LT.html" accesskey="U">The LT Package</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">box</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="box">
<span id="id1"></span><h1>box<a class="headerlink" href="#box" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-LT.box"></span><p>The LT box contains an assortment of plotting, histogramming and fitting routines
used for data analysis. The plotting routines have been imported from the <a class="reference internal" href="lt_plotting.html#plotting"><span class="std std-ref">plotting</span></a>
module and the fitting routines have been imported from the <a class="reference internal" href="../LT_Fit.html#lt-fit"><span class="std std-ref">The LT_Fit Package</span></a>. For detailed
information about these functions check the <a class="reference internal" href="lt_plotting.html#plotting"><span class="std std-ref">plotting</span></a> and the the <a class="reference internal" href="../LT_Fit.html#lt-fit"><span class="std std-ref">The LT_Fit Package</span></a> documentation.</p>
<p>Normally all you should need to do is import the <a class="reference internal" href="#box">box</a> and you have a <em>box of tools</em>.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">LT.box</span> <span class="k">as</span> <span class="nn">B</span>
</pre></div>
</div>
<hr class="docutils" />
<p>Imported functions:</p>
<blockquote>
<div><dl class="simple">
<dt>From LT.plotting:</dt><dd><ul class="simple">
<li><p><a class="reference internal" href="lt_plotting.html#LT.plotting.plot_exp" title="LT.plotting.plot_exp"><code class="xref py py-meth docutils literal notranslate"><span class="pre">plot_exp()</span></code></a>: plot experimental data points with or without error bar</p></li>
<li><p><a class="reference internal" href="lt_plotting.html#LT.plotting.plot_line" title="LT.plotting.plot_line"><code class="xref py py-meth docutils literal notranslate"><span class="pre">plot_line()</span></code></a>: plot a line through a set of data points</p></li>
<li><p><a class="reference internal" href="lt_plotting.html#LT.plotting.plot_spline" title="LT.plotting.plot_spline"><code class="xref py py-meth docutils literal notranslate"><span class="pre">plot_spline()</span></code></a>: plot a spline curve through a set of data points</p></li>
<li><p>dplot_exp: (<a class="reference internal" href="lt_plotting.html#LT.plotting.datafile_plot_exp" title="LT.plotting.datafile_plot_exp"><code class="xref py py-meth docutils literal notranslate"><span class="pre">datafile_plot_exp()</span></code></a>) is like plot_exp but accesses the datafile variables directly via their names</p></li>
<li><p>dplot_line: (<a class="reference internal" href="lt_plotting.html#LT.plotting.datafile_plot_theory" title="LT.plotting.datafile_plot_theory"><code class="xref py py-meth docutils literal notranslate"><span class="pre">datafile_plot_theory()</span></code></a>) like plot_line for datafile variables</p></li>
<li><p>dplot_spline: (<a class="reference internal" href="lt_plotting.html#LT.plotting.datafile_spline_plot_theory" title="LT.plotting.datafile_spline_plot_theory"><code class="xref py py-meth docutils literal notranslate"><span class="pre">datafile_spline_plot_theory()</span></code></a>) like plot_spline for datafiles variables</p></li>
</ul>
</dd>
<dt>From LT_Fit:</dt><dd><ul class="simple">
<li><p><a class="reference internal" href="lt_fit_linear_fit.html#LT_Fit.linear_fit.linefit" title="LT_Fit.linear_fit.linefit"><code class="xref py py-class docutils literal notranslate"><span class="pre">linefit</span></code></a>: fit a straight line through a set of data points</p></li>
<li><p><a class="reference internal" href="lt_fit_linear_fit.html#LT_Fit.linear_fit.polyfit" title="LT_Fit.linear_fit.polyfit"><code class="xref py py-class docutils literal notranslate"><span class="pre">polyfit</span></code></a>: fit a polynomial</p></li>
<li><p><a class="reference internal" href="lt_fit_linear_fit.html#LT_Fit.linear_fit.gen_linfit" title="LT_Fit.linear_fit.gen_linfit"><code class="xref py py-class docutils literal notranslate"><span class="pre">gen_linfit</span></code></a>: general linear fit</p></li>
<li><p><a class="reference internal" href="lt_fit_gen_fit.html#LT_Fit.gen_fit.genfit" title="LT_Fit.gen_fit.genfit"><code class="xref py py-class docutils literal notranslate"><span class="pre">genfit</span></code></a>: general, non-linear fit</p></li>
</ul>
</dd>
</dl>
</div></blockquote>
<hr class="docutils" />
<p>Box Content:</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference internal" href="#LT.box.get_file" title="LT.box.get_file"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_file()</span></code></a></p></li>
<li><p><a class="reference internal" href="#LT.box.get_data" title="LT.box.get_data"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_data()</span></code></a></p></li>
<li><p><a class="reference internal" href="#LT.box.get_spectrum" title="LT.box.get_spectrum"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_spectrum()</span></code></a></p></li>
<li><p><a class="reference internal" href="#LT.box.histo" title="LT.box.histo"><code class="xref py py-class docutils literal notranslate"><span class="pre">histo</span></code></a></p></li>
</ul>
</div></blockquote>
<hr class="docutils" />
<dl class="py function">
<dt id="LT.box.get_file">
<code class="sig-prename descclassname">LT.box.</code><code class="sig-name descname">get_file</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">file</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#LT.box.get_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Assume that  B is  the name of LT.box.</p>
<p>Open and read the file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">md</span> <span class="o">=</span> <span class="n">B</span><span class="o">.</span><span class="n">get_file</span><span class="p">(</span> <span class="s1">&#39;file.data&#39;</span> <span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<hr class="docutils" />
<dl class="py function">
<dt id="LT.box.get_data">
<code class="sig-prename descclassname">LT.box.</code><code class="sig-name descname">get_data</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">D</span></em>, <em class="sig-param"><span class="n">var</span></em><span class="sig-paren">)</span><a class="headerlink" href="#LT.box.get_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Assume that  B is  the name of LT.box.</p>
<p>Get all the values of variable ‘my_var’ as a <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.array.html#numpy.array" title="(in NumPy v1.19)"><code class="xref py py-func docutils literal notranslate"><span class="pre">numpy.array()</span></code></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mv</span> <span class="o">=</span> <span class="n">B</span><span class="o">.</span><span class="n">get_data</span><span class="p">(</span><span class="n">md</span><span class="p">,</span> <span class="s1">&#39;my_var&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<hr class="docutils" />
<dl class="py function">
<dt id="LT.box.get_spectrum">
<code class="sig-prename descclassname">LT.box.</code><code class="sig-name descname">get_spectrum</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">file</span></em>, <em class="sig-param"><span class="n">calibration</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#LT.box.get_spectrum" title="Permalink to this definition">¶</a></dt>
<dd><p>Read an MCA spectrum and convert it to a histogram.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">h</span> <span class="o">=</span> <span class="n">B</span><span class="o">.</span><span class="n">get_spectrum</span><span class="p">(</span><span class="s1">&#39;co60.spe&#39;</span><span class="p">)</span>  <span class="c1"># read the spectrum</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">h</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>                        <span class="c1"># plot the spectrum</span>
</pre></div>
</div>
</dd></dl>

<hr class="docutils" />
<dl class="py class">
<dt id="LT.box.histo">
<em class="property">class </em><code class="sig-prename descclassname">LT.box.</code><code class="sig-name descname">histo</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">values</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">range</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">bins</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">histogram</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">bin_error</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">bin_center</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">bin_content</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">file</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">window</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">title</span><span class="o">=</span><span class="default_value">'my histogram'</span></em>, <em class="sig-param"><span class="n">xlabel</span><span class="o">=</span><span class="default_value">'x-bin'</span></em>, <em class="sig-param"><span class="n">ylabel</span><span class="o">=</span><span class="default_value">'content'</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#LT.box.histo" title="Permalink to this definition">¶</a></dt>
<dd><p>Define a histogram based on the np.histogram class.</p>
<p>The various ways of defining one are:</p>
<blockquote>
<div><ul>
<li><p>If <em>a</em> is a 1D ( <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.array.html#numpy.array" title="(in NumPy v1.19)"><code class="xref py py-func docutils literal notranslate"><span class="pre">numpy.array()</span></code></a>) containing the data to be histogrammed</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">h</span> <span class="o">=</span> <span class="n">histo</span><span class="p">(</span> <span class="n">a</span> <span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>If <em>his</em> is the output of the <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.histogram.html#numpy.histogram" title="(in NumPy v1.19)"><code class="xref py py-func docutils literal notranslate"><span class="pre">numpy.histogram()</span></code></a> function</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">h</span> <span class="o">=</span> <span class="n">histo</span><span class="p">(</span><span class="n">histogram</span> <span class="o">=</span> <span class="n">his</span><span class="p">)</span> 
</pre></div>
</div>
</li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">bc</span></code> is a 1D array with bin center values, and <code class="docutils literal notranslate"><span class="pre">bcont</span></code>
contains bin content values then:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">h</span> <span class="o">=</span> <span class="n">histo</span><span class="p">(</span><span class="n">bin_center</span> <span class="o">=</span> <span class="n">bc</span><span class="p">,</span> <span class="n">bin_content</span> <span class="o">=</span> <span class="n">bcont</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>A filename for a stored histogram is given</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">h</span> <span class="o">=</span> <span class="n">histo</span><span class="p">(</span><span class="n">filename</span><span class="p">),</span> <span class="n">where</span> <span class="n">filename</span> <span class="n">contains</span> <span class="n">the</span> <span class="n">pdatafile</span>
</pre></div>
</div>
<p>Usually the result of a histo.save operation</p>
</li>
</ul>
</div></blockquote>
<p>Important keywords:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 16%" />
<col style="width: 84%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Keyword</p></th>
<th class="head"><p>Meaning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>values</p></td>
<td><p>Array of values to be histogrammed (<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.array.html#numpy.array" title="(in NumPy v1.19)"><code class="xref py py-func docutils literal notranslate"><span class="pre">numpy.array()</span></code></a>)</p></td>
</tr>
<tr class="row-odd"><td><p>range</p></td>
<td><p>Lower and upper limits  of binning ( e.g. <code class="docutils literal notranslate"><span class="pre">range</span> <span class="pre">=</span> <span class="pre">(10.,20.)</span></code> )</p></td>
</tr>
<tr class="row-even"><td><p>bins</p></td>
<td><p>Number of bins</p></td>
</tr>
<tr class="row-odd"><td><p>histogram</p></td>
<td><p>Result of <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.histogram.html#numpy.histogram" title="(in NumPy v1.19)"><code class="xref py py-func docutils literal notranslate"><span class="pre">numpy.histogram()</span></code></a> function</p></td>
</tr>
<tr class="row-even"><td><p>bin_error</p></td>
<td><p>Array of errors for each bin content (<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.array.html#numpy.array" title="(in NumPy v1.19)"><code class="xref py py-func docutils literal notranslate"><span class="pre">numpy.array()</span></code></a>)</p></td>
</tr>
<tr class="row-odd"><td><p>bin_center</p></td>
<td><p>Array of bin-center values (<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.array.html#numpy.array" title="(in NumPy v1.19)"><code class="xref py py-func docutils literal notranslate"><span class="pre">numpy.array()</span></code></a>)</p></td>
</tr>
<tr class="row-even"><td><p>bin_content</p></td>
<td><p>Array of bin-content values (<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.array.html#numpy.array" title="(in NumPy v1.19)"><code class="xref py py-func docutils literal notranslate"><span class="pre">numpy.array()</span></code></a>)</p></td>
</tr>
<tr class="row-odd"><td><p>file</p></td>
<td><p>Load data from file</p></td>
</tr>
<tr class="row-even"><td><p>window</p></td>
<td><p>Set a window (a zoom window)</p></td>
</tr>
<tr class="row-odd"><td><p>title</p></td>
<td><p>Set the title</p></td>
</tr>
<tr class="row-even"><td><p>xlabel</p></td>
<td><p>Set the x-label</p></td>
</tr>
<tr class="row-odd"><td><p>ylabel</p></td>
<td><p>Set the y-label</p></td>
</tr>
</tbody>
</table>
<p>Additional keyword arguments are passed to the <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.histogram.html#numpy.histogram" title="(in NumPy v1.19)"><code class="xref py py-func docutils literal notranslate"><span class="pre">numpy.histogram()</span></code></a> function</p>
<dl class="py method">
<dt id="LT.box.histo.apply_calibration">
<code class="sig-name descname">apply_calibration</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cal</span></em><span class="sig-paren">)</span><a class="headerlink" href="#LT.box.histo.apply_calibration" title="Permalink to this definition">¶</a></dt>
<dd><p>apply x-axis calibration, new axis values are cal(xaxis)</p>
</dd></dl>

<dl class="py method">
<dt id="LT.box.histo.clear">
<code class="sig-name descname">clear</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#LT.box.histo.clear" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the content and errors to 0.</p>
</dd></dl>

<dl class="py method">
<dt id="LT.box.histo.clear_window">
<code class="sig-name descname">clear_window</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#LT.box.histo.clear_window" title="Permalink to this definition">¶</a></dt>
<dd><p>Reset (Clear) the defined window</p>
</dd></dl>

<dl class="py method">
<dt id="LT.box.histo.copy">
<code class="sig-name descname">copy</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#LT.box.histo.copy" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a copy of the histogram:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="go">&gt;&gt;&gt;hc = h.copy()</span>
</pre></div>
</div>
<p>Only the histogram values are copied, no lables and titles etc.</p>
</dd></dl>

<dl class="py method">
<dt id="LT.box.histo.fill">
<code class="sig-name descname">fill</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">y</span></em>, <em class="sig-param"><span class="n">add</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#LT.box.histo.fill" title="Permalink to this definition">¶</a></dt>
<dd><p>Fill the histogram with the values stored in the <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.array.html#numpy.array" title="(in NumPy v1.19)"><code class="xref py py-func docutils literal notranslate"><span class="pre">numpy.array()</span></code></a> y.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 18%" />
<col style="width: 82%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Keyword</p></th>
<th class="head"><p>Meaning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>add</p></td>
<td><p>if True add the results to the existing content</p></td>
</tr>
</tbody>
</table>
<p>Additional keyword arguments are passed to the <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.histogram.html#numpy.histogram" title="(in NumPy v1.19)"><code class="xref py py-func docutils literal notranslate"><span class="pre">numpy.histogram()</span></code></a> function</p>
</dd></dl>

<dl class="py method">
<dt id="LT.box.histo.find_bin">
<code class="sig-name descname">find_bin</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em><span class="sig-paren">)</span><a class="headerlink" href="#LT.box.histo.find_bin" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the bin that would contain the value x</p>
</dd></dl>

<dl class="py method">
<dt id="LT.box.histo.fit">
<code class="sig-name descname">fit</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">xmin</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">xmax</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">init</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">ignore_zeros</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#LT.box.histo.fit" title="Permalink to this definition">¶</a></dt>
<dd><p>Fit a gaussian on a quadratic background. You can also just
fit a background or just a gaussian. All this is controlled by which
parameters you want to fit. Another important part of non-linear
fitting is that you need to provide reasonable guesses for the fit
parameters. The parameters in <a class="reference internal" href="#LT.box.histo" title="LT.box.histo"><code class="xref py py-class docutils literal notranslate"><span class="pre">histo</span></code></a> are not just
numbers but objects with their own properties and functions (see
<a class="reference internal" href="lt_fit_parameters.html#LT_Fit.parameters.Parameter" title="LT_Fit.parameters.Parameter"><code class="xref py py-class docutils literal notranslate"><span class="pre">Parameter</span></code></a> ).  The full fit function is as
follows:</p>
<p><img class="math" src="../_images/math/713d257e5ce87f1dedb20c4f22e9decd051d24ed.png" alt="$ f(x) = b_0 + b_1x + b_2x^2  + A exp(-(x - \mu)^2/\sigma^2)$"/></p>
<p>The (<a class="reference internal" href="#LT.box.histo" title="LT.box.histo"><code class="xref py py-class docutils literal notranslate"><span class="pre">LT.box.histo</span></code></a>) parameters are:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 28%" />
<col style="width: 72%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Histo Class Member</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><img class="math" src="../_images/math/6c35402649b841ef7dba3e17bd6c9a19f8b7e8a7.png" alt="$b_o $"/></p></td>
<td><p>b0</p></td>
</tr>
<tr class="row-odd"><td><p><img class="math" src="../_images/math/987e552e9d6687463122e2948e6d3802727bb050.png" alt="$b_1 $"/></p></td>
<td><p>b1</p></td>
</tr>
<tr class="row-even"><td><p><img class="math" src="../_images/math/f64474f5a2108c46833f4a96c5c24b8c1eb83da2.png" alt="$b_2 $"/></p></td>
<td><p>b2</p></td>
</tr>
<tr class="row-odd"><td><p><img class="math" src="../_images/math/db02ffdb69aa19ecd6546754acbcb459c0e090af.png" alt="$A $"/></p></td>
<td><p>A</p></td>
</tr>
<tr class="row-even"><td><p><img class="math" src="../_images/math/dd634bad23aafc8862982ab3064f577716cdb0ed.png" alt="$\mu  $"/></p></td>
<td><p>mean</p></td>
</tr>
<tr class="row-odd"><td><p><img class="math" src="../_images/math/04bfac36be583df993950850476b3a30255afdb8.png" alt="$\sigma  $"/></p></td>
<td><p>sigma</p></td>
</tr>
</tbody>
</table>
<p>Which parameters are fitted is defined in <a class="reference internal" href="#LT.box.histo.set_fit_list" title="LT.box.histo.set_fit_list"><code class="xref py py-meth docutils literal notranslate"><span class="pre">set_fit_list()</span></code></a></p>
<p>Keyword arguments are:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 13%" />
<col style="width: 88%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Keyword</p></th>
<th class="head"><p>Meaning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>xmin</p></td>
<td><p>lower fit limit</p></td>
</tr>
<tr class="row-odd"><td><p>xmax</p></td>
<td><p>upper fit limit</p></td>
</tr>
<tr class="row-even"><td><p>init</p></td>
<td><p>True/False (default = True) estimate initial fit parameters automatically</p></td>
</tr>
<tr class="row-odd"><td><p>ignore_zeros</p></td>
<td><p>True/False (default = True) ignore channels with bin content zero</p></td>
</tr>
<tr class="row-even"><td><p>kwargs</p></td>
<td><p>additional keywords are passed to gen_fit (use only if you know what you are doing!)</p></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="py method">
<dt id="LT.box.histo.fit_func">
<code class="sig-name descname">fit_func</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em><span class="sig-paren">)</span><a class="headerlink" href="#LT.box.histo.fit_func" title="Permalink to this definition">¶</a></dt>
<dd><p>The function fitted to the histogram data</p>
</dd></dl>

<dl class="py method">
<dt id="LT.box.histo.fit_view">
<code class="sig-name descname">fit_view</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">init</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#LT.box.histo.fit_view" title="Permalink to this definition">¶</a></dt>
<dd><p>Fit histogram using the current display limits as fit range. This is only
useful if the histogram has been plotted.</p>
</dd></dl>

<dl class="py method">
<dt id="LT.box.histo.init_gauss">
<code class="sig-name descname">init_gauss</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">xmin</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">xmax</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#LT.box.histo.init_gauss" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the initial parameter guess for a gaussian. These parameters
can them be used in the call to <a class="reference internal" href="#LT.box.histo.fit" title="LT.box.histo.fit"><code class="xref py py-class docutils literal notranslate"><span class="pre">fit</span></code></a></p>
</dd></dl>

<dl class="py method">
<dt id="LT.box.histo.init_parameters">
<code class="sig-name descname">init_parameters</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#LT.box.histo.init_parameters" title="Permalink to this definition">¶</a></dt>
<dd><p>Reset fit parameters to their default values</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><dl class="simple">
<dt>None.</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="LT.box.histo.load">
<code class="sig-name descname">load</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">file</span><span class="o">=</span><span class="default_value">'histo.data'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#LT.box.histo.load" title="Permalink to this definition">¶</a></dt>
<dd><p>read the histogram data from <a class="reference internal" href="lt_pdatafile.html#module-LT.pdatafile" title="LT.pdatafile"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pdatafile</span></code></a></p>
<p>If the file does not result from a save function make sure that
all the necessary data are present.</p>
</dd></dl>

<dl class="py method">
<dt id="LT.box.histo.plot">
<code class="sig-name descname">plot</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filled</span><span class="o">=</span><span class="default_value">'True'</span></em>, <em class="sig-param"><span class="n">ymin</span><span class="o">=</span><span class="default_value">0.0</span></em>, <em class="sig-param"><span class="n">axes</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">ignore_zeros</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#LT.box.histo.plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot the histogram content:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 17%" />
<col style="width: 83%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Keyword</p></th>
<th class="head"><p>Meaning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>filled</p></td>
<td><p>if True draw a filled histogram</p></td>
</tr>
<tr class="row-odd"><td><p>ymin</p></td>
<td><p>lower limit where fill starts (horizontal line)</p></td>
</tr>
<tr class="row-even"><td><p>ignore_zeros</p></td>
<td><p>do not plot channels with  bin content 0 (default = False)</p></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="py method">
<dt id="LT.box.histo.plot_exp">
<code class="sig-name descname">plot_exp</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">ignore_zeros</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#LT.box.histo.plot_exp" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot histogram content and errors like experimental data.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 17%" />
<col style="width: 83%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Keyword</p></th>
<th class="head"><p>Meaning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>ignore_zeros</p></td>
<td><p>do not plot channels with  bin content 0 (default = False)</p></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="py method">
<dt id="LT.box.histo.plot_fit">
<code class="sig-name descname">plot_fit</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">color</span><span class="o">=</span><span class="default_value">'r'</span></em>, <em class="sig-param"><span class="n">axes</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#LT.box.histo.plot_fit" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot the fitted curve</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 18%" />
<col style="width: 82%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Keyword</p></th>
<th class="head"><p>Meaning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>color</p></td>
<td><p>color of the fitted line</p></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="py method">
<dt id="LT.box.histo.rebin">
<code class="sig-name descname">rebin</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">n</span></em>, <em class="sig-param"><span class="n">scale</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">use_mean</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">replace</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#LT.box.histo.rebin" title="Permalink to this definition">¶</a></dt>
<dd><p>rebin the histogram by a factor n:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="go">&gt;&gt;&gt;hc = h.rebin(2)</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 18%" />
<col style="width: 82%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Keyword</p></th>
<th class="head"><p>Meaning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>scale</p></td>
<td><dl class="simple">
<dt>True: the original bin number is not a multiple of n</dt><dd><p>and the last bin content will be scaled</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p>use_mean</p></td>
<td><p>True: the new bin content is the mean of the bin_content</p></td>
</tr>
<tr class="row-even"><td><p>replace</p></td>
<td><dl class="simple">
<dt>True: replace the current histogram with the</dt><dd><p>rebinned version</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="py method">
<dt id="LT.box.histo.save">
<code class="sig-name descname">save</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filename</span><span class="o">=</span><span class="default_value">'histo.data'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#LT.box.histo.save" title="Permalink to this definition">¶</a></dt>
<dd><p>Save the histogram in <a class="reference internal" href="lt_pdatafile.html#module-LT.pdatafile" title="LT.pdatafile"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pdatafile</span></code></a> format</p>
</dd></dl>

<dl class="py method">
<dt id="LT.box.histo.set_fit_list">
<code class="sig-name descname">set_fit_list</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fit</span><span class="o">=</span><span class="default_value">['A', 'mean', 'sigma']</span></em><span class="sig-paren">)</span><a class="headerlink" href="#LT.box.histo.set_fit_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Define which parameters are to be fitted.</p>
<p>The default list is</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fit</span> <span class="o">=</span> <span class="p">[</span> <span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;mean&#39;</span><span class="p">,</span> <span class="s1">&#39;sigma&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>to use all parameters:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">h</span><span class="o">.</span><span class="n">set_fit_list</span><span class="p">(</span> <span class="n">fit</span> <span class="o">=</span> <span class="p">[</span> <span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;mean&#39;</span><span class="p">,</span> <span class="s1">&#39;sigma&#39;</span><span class="p">,</span> <span class="s1">&#39;b0&#39;</span><span class="p">,</span> <span class="s1">&#39;b1&#39;</span><span class="p">,</span> <span class="s1">&#39;b2&#39;</span><span class="p">])</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="LT.box.histo.set_window">
<code class="sig-name descname">set_window</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">xmin</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">xmax</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#LT.box.histo.set_window" title="Permalink to this definition">¶</a></dt>
<dd><p>Define a window into the histogram. This is similar to a zoom or a
region of interest (ROI)</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 18%" />
<col style="width: 82%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Keyword</p></th>
<th class="head"><p>Meaning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>xmin</p></td>
<td><p>lower limit for plotting or fitting</p></td>
</tr>
<tr class="row-odd"><td><p>xmax</p></td>
<td><p>upper limit</p></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="py method">
<dt id="LT.box.histo.set_window_view">
<code class="sig-name descname">set_window_view</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#LT.box.histo.set_window_view" title="Permalink to this definition">¶</a></dt>
<dd><p>Like set_windows but uses the current display limits. This is only
useful if the histogram has been plotted.</p>
</dd></dl>

<dl class="py method">
<dt id="LT.box.histo.show_fit_list">
<code class="sig-name descname">show_fit_list</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#LT.box.histo.show_fit_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Show the current fit list</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><dl class="simple">
<dt>None.</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="LT.box.histo.sum">
<code class="sig-name descname">sum</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">xmin</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">xmax</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#LT.box.histo.sum" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the sum of all bins. If the limits are given, calculate the sum of all bins between the bins that contain
the values xmin and xmax.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">s0</span> <span class="o">=</span> <span class="n">h</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="c1"># add all bins</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s1</span> <span class="o">=</span> <span class="n">h</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">)</span> <span class="c1"># add the bins between 0.5 and 1.1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s2</span> <span class="o">=</span> <span class="n">h</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">xmin</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span> <span class="n">xmax</span> <span class="o">=</span> <span class="mf">1.1</span><span class="p">)</span> <span class="c1"># add the bins between 0.5 and 1.1</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 18%" />
<col style="width: 82%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Keyword</p></th>
<th class="head"><p>Meaning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>xmin</p></td>
<td><p>lower limit of sum of bin content</p></td>
</tr>
<tr class="row-odd"><td><p>xmax</p></td>
<td><p>upper limit of sum</p></td>
</tr>
</tbody>
</table>
<p>The errors are also calculated.</p>
</dd></dl>

</dd></dl>

<hr class="docutils" />
<dl class="py class">
<dt id="LT.box.histo2d">
<em class="property">class </em><code class="sig-prename descclassname">LT.box.</code><code class="sig-name descname">histo2d</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x_values</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">y_values</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">range</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">bins</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">histogram</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">bin_error</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">bin_content</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">x_bin_center</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">y_bin_center</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">file</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">title</span><span class="o">=</span><span class="default_value">'my histogram'</span></em>, <em class="sig-param"><span class="n">xlabel</span><span class="o">=</span><span class="default_value">'x-bin'</span></em>, <em class="sig-param"><span class="n">ylabel</span><span class="o">=</span><span class="default_value">'y-bin'</span></em>, <em class="sig-param"><span class="n">zlabel</span><span class="o">=</span><span class="default_value">'content'</span></em>, <em class="sig-param"><span class="n">bad_color</span><span class="o">=</span><span class="default_value">'w'</span></em>, <em class="sig-param"><span class="n">colorbar</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">logz</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#LT.box.histo2d" title="Permalink to this definition">¶</a></dt>
<dd><p>Define a 2d histogram based on the np.histogram2d class.</p>
<p>The various ways of defining one are:</p>
<blockquote>
<div><ul>
<li><p>If <em>xv</em> is a 1D ( <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.array.html#numpy.array" title="(in NumPy v1.19)"><code class="xref py py-func docutils literal notranslate"><span class="pre">numpy.array()</span></code></a>) containing the x-value data to be histogrammed
and <em>yx</em> is a 1D array containing the y-value data :</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">h2</span> <span class="o">=</span> <span class="n">histo2d</span><span class="p">(</span> <span class="n">xv</span><span class="p">,</span> <span class="n">yv</span> <span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>If <em>his2</em> is the output of the <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.histogram2d.html#numpy.histogram2d" title="(in NumPy v1.19)"><code class="xref py py-func docutils literal notranslate"><span class="pre">numpy.histogram2d()</span></code></a> function</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">h2</span> <span class="o">=</span> <span class="n">histo2d</span><span class="p">(</span><span class="n">histogram</span> <span class="o">=</span> <span class="n">his2</span><span class="p">)</span> 
</pre></div>
</div>
</li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">xbc</span></code> is an array with x-bin center values, <code class="docutils literal notranslate"><span class="pre">ybc</span></code> is an array with y-bin center values
and <code class="docutils literal notranslate"><span class="pre">bcont</span></code> contains bin content values then use:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">h2</span> <span class="o">=</span> <span class="n">histo2d</span><span class="p">(</span><span class="n">x_bin_center</span> <span class="o">=</span> <span class="n">xbc</span><span class="p">,</span> <span class="n">y_bin_center</span> <span class="o">=</span> <span class="n">ybc</span><span class="p">,</span> <span class="n">bin_content</span> <span class="o">=</span> <span class="n">bcont</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>A filename for a stored histogram is given</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">h2</span> <span class="o">=</span> <span class="n">histo2d</span><span class="p">(</span><span class="n">filename</span><span class="p">),</span> <span class="n">where</span> <span class="n">filename</span> <span class="n">contains</span> <span class="n">the</span> <span class="n">pdatafile</span>
</pre></div>
</div>
<p>Usually the result of a histo2d.save operation</p>
</li>
</ul>
</div></blockquote>
<p>Important keywords:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 16%" />
<col style="width: 84%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Keyword</p></th>
<th class="head"><p>Meaning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>xvalues</p></td>
<td><p>Array of x-values to be histogrammed (1d-<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.array.html#numpy.array" title="(in NumPy v1.19)"><code class="xref py py-func docutils literal notranslate"><span class="pre">numpy.array()</span></code></a>)</p></td>
</tr>
<tr class="row-odd"><td><p>yvalues</p></td>
<td><p>Array of y-values to be histogrammed (1d-<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.array.html#numpy.array" title="(in NumPy v1.19)"><code class="xref py py-func docutils literal notranslate"><span class="pre">numpy.array()</span></code></a>)</p></td>
</tr>
<tr class="row-even"><td><p>range</p></td>
<td><p>Lower and upper limits  of binning ( e.g. <code class="docutils literal notranslate"><span class="pre">range</span> <span class="pre">=</span> <span class="pre">(10.,20.)</span></code> )</p></td>
</tr>
<tr class="row-odd"><td><p>bins</p></td>
<td><p>Number of bins, or [binsx, binsy]</p></td>
</tr>
<tr class="row-even"><td><p>histogram</p></td>
<td><p>Result of <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.histogram2d.html#numpy.histogram2d" title="(in NumPy v1.19)"><code class="xref py py-func docutils literal notranslate"><span class="pre">numpy.histogram2d()</span></code></a> function</p></td>
</tr>
<tr class="row-odd"><td><p>x_bin_center</p></td>
<td><p>1d-Array of x - bin-center values (<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.array.html#numpy.array" title="(in NumPy v1.19)"><code class="xref py py-func docutils literal notranslate"><span class="pre">numpy.array()</span></code></a>)</p></td>
</tr>
<tr class="row-even"><td><p>y_bin_center</p></td>
<td><p>1d-Array of y - bin-center values (<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.array.html#numpy.array" title="(in NumPy v1.19)"><code class="xref py py-func docutils literal notranslate"><span class="pre">numpy.array()</span></code></a>)</p></td>
</tr>
<tr class="row-odd"><td><p>bin_content</p></td>
<td><p>2d-Array of bin-content values (<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.array.html#numpy.array" title="(in NumPy v1.19)"><code class="xref py py-func docutils literal notranslate"><span class="pre">numpy.array()</span></code></a>)</p></td>
</tr>
<tr class="row-even"><td><p>bin_error</p></td>
<td><p>2d-Array of errors for each bin content (<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.array.html#numpy.array" title="(in NumPy v1.19)"><code class="xref py py-func docutils literal notranslate"><span class="pre">numpy.array()</span></code></a>)</p></td>
</tr>
<tr class="row-odd"><td><p>file</p></td>
<td><p>Load data from file</p></td>
</tr>
<tr class="row-even"><td><p>title</p></td>
<td><p>Set the title</p></td>
</tr>
<tr class="row-odd"><td><p>xlabel</p></td>
<td><p>Set the x-label</p></td>
</tr>
<tr class="row-even"><td><p>ylabel</p></td>
<td><p>Set the y-label</p></td>
</tr>
<tr class="row-odd"><td><p>zlabel</p></td>
<td><p>Set the z-label</p></td>
</tr>
<tr class="row-even"><td><p>colorbar</p></td>
<td><p>if True, plot a colorbar</p></td>
</tr>
<tr class="row-odd"><td><p>bad_color</p></td>
<td><p>Set the color for plot for bins below zmin (default: w)</p></td>
</tr>
<tr class="row-even"><td><p>logz</p></td>
<td><p>if True plot content on log scale</p></td>
</tr>
</tbody>
</table>
<p>Additional keyword arguments are passed to the <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.histogram2d.html#numpy.histogram2d" title="(in NumPy v1.19)"><code class="xref py py-func docutils literal notranslate"><span class="pre">numpy.histogram2d()</span></code></a> function</p>
<dl class="py method">
<dt id="LT.box.histo2d.apply_calibration">
<code class="sig-name descname">apply_calibration</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cal_x</span></em>, <em class="sig-param"><span class="n">cal_y</span></em><span class="sig-paren">)</span><a class="headerlink" href="#LT.box.histo2d.apply_calibration" title="Permalink to this definition">¶</a></dt>
<dd><p>apply x and y-axis calibration, new axis values are cal(xaxis) cal(yaxis)</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 18%" />
<col style="width: 82%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Keyword</p></th>
<th class="head"><p>Meaning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>cal_x</p></td>
<td><p>x-axis calibration function</p></td>
</tr>
<tr class="row-odd"><td><p>cal_y</p></td>
<td><p>y-axis calibration function</p></td>
</tr>
</tbody>
</table>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><dl class="simple">
<dt>None., calculates new bin vakues</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="LT.box.histo2d.clear">
<code class="sig-name descname">clear</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#LT.box.histo2d.clear" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the content and errors to 0.</p>
</dd></dl>

<dl class="py method">
<dt id="LT.box.histo2d.draw_polygon">
<code class="sig-name descname">draw_polygon</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">p</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#LT.box.histo2d.draw_polygon" title="Permalink to this definition">¶</a></dt>
<dd><p>draw a polygon used as cut</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 16%" />
<col style="width: 84%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Keyword</p></th>
<th class="head"><p>Meaning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>p</p></td>
<td><p>array of coordinate pairs determining the corners of the polygon</p></td>
</tr>
</tbody>
</table>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><dl class="simple">
<dt>None.</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="LT.box.histo2d.fill">
<code class="sig-name descname">fill</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">y</span></em>, <em class="sig-param"><span class="n">add</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#LT.box.histo2d.fill" title="Permalink to this definition">¶</a></dt>
<dd><p>Fill the histogram with the values stored in the <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.array.html#numpy.array" title="(in NumPy v1.19)"><code class="xref py py-func docutils literal notranslate"><span class="pre">numpy.array()</span></code></a> y.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 18%" />
<col style="width: 82%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Keyword</p></th>
<th class="head"><p>Meaning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>add</p></td>
<td><p>if True add the results to the existing content</p></td>
</tr>
</tbody>
</table>
<p>Additional keyword arguments are passed to the <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.histogram.html#numpy.histogram" title="(in NumPy v1.19)"><code class="xref py py-func docutils literal notranslate"><span class="pre">numpy.histogram()</span></code></a> function</p>
</dd></dl>

<dl class="py method">
<dt id="LT.box.histo2d.find_bin">
<code class="sig-name descname">find_bin</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">y</span></em><span class="sig-paren">)</span><a class="headerlink" href="#LT.box.histo2d.find_bin" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the bin value pair for that would contain 
the value pair x, y</p>
</dd></dl>

<dl class="py method">
<dt id="LT.box.histo2d.plot">
<code class="sig-name descname">plot</code><span class="sig-paren">(</span><em class="sig-param">axes=None</em>, <em class="sig-param">graph='patch'</em>, <em class="sig-param">clevel=10</em>, <em class="sig-param">colormap=&lt;matplotlib.colors.LinearSegmentedColormap object&gt;</em>, <em class="sig-param">logz=False</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#LT.box.histo2d.plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot the 2d histogram content:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Keyword</p></th>
<th class="head"><p>Meaning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>graph</p></td>
<td><p>type of plot: patch, contour, surface, lego</p></td>
</tr>
<tr class="row-odd"><td><p>clevel</p></td>
<td><p>number of contour levels (default 10)</p></td>
</tr>
<tr class="row-even"><td><p>colormap</p></td>
<td><p>colormap to be used (default CMRmap)</p></td>
</tr>
<tr class="row-odd"><td><p>logz</p></td>
<td><p>if True use a logarithmic scale for content (patch and contour only)</p></td>
</tr>
<tr class="row-even"><td><p>kwargs</p></td>
<td><p>additional kwargs are possed to the plotting routines</p></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="py method">
<dt id="LT.box.histo2d.poly_cut">
<code class="sig-name descname">poly_cut</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">p</span></em><span class="sig-paren">)</span><a class="headerlink" href="#LT.box.histo2d.poly_cut" title="Permalink to this definition">¶</a></dt>
<dd><p>Setup a polygon cut :</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 16%" />
<col style="width: 84%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Keyword</p></th>
<th class="head"><p>Meaning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>p</p></td>
<td><p>array of coordinate pairs determining the corners of the polygon</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt>example for a triangle cut<span class="classifier"></span></dt><dd><p>p = np.array( [[1,2], [2,4], [0.5,3]  ])</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><dl class="simple">
<dt>Masked array to be applied to the bin_content and bin_error</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="LT.box.histo2d.project_x">
<code class="sig-name descname">project_x</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">range</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">bins</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#LT.box.histo2d.project_x" title="Permalink to this definition">¶</a></dt>
<dd><p>project a range of y-bins onto the x-axis</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 18%" />
<col style="width: 82%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Keyword</p></th>
<th class="head"><p>Meaning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>range</p></td>
<td><p>the range in y included in the projection</p></td>
</tr>
<tr class="row-odd"><td><p>bins</p></td>
<td><p>an array of bins or a slice selecting the y-bins to be
included in the projection</p></td>
</tr>
<tr class="row-even"><td><p>both None</p></td>
<td><p>Project all the y-bins</p></td>
</tr>
</tbody>
</table>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><dl class="simple">
<dt>1d - histogram</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="LT.box.histo2d.project_y">
<code class="sig-name descname">project_y</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">range</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">bins</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#LT.box.histo2d.project_y" title="Permalink to this definition">¶</a></dt>
<dd><p>project a range of x-bins onto the y-axis</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 18%" />
<col style="width: 82%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Keyword</p></th>
<th class="head"><p>Meaning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>range</p></td>
<td><p>the range in x included in the projection</p></td>
</tr>
<tr class="row-odd"><td><p>bins</p></td>
<td><p>an array of bins or a slice selecting the x-bins to be
included in the projection</p></td>
</tr>
<tr class="row-even"><td><p>both None</p></td>
<td><p>Project all the x-bins</p></td>
</tr>
</tbody>
</table>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><dl class="simple">
<dt>1d - histogram</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="LT.box.histo2d.rect_cut">
<code class="sig-name descname">rect_cut</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x1</span></em>, <em class="sig-param"><span class="n">x2</span></em>, <em class="sig-param"><span class="n">y1</span></em>, <em class="sig-param"><span class="n">y2</span></em><span class="sig-paren">)</span><a class="headerlink" href="#LT.box.histo2d.rect_cut" title="Permalink to this definition">¶</a></dt>
<dd><p>Setup a rectangle cut</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 18%" />
<col style="width: 82%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Keyword</p></th>
<th class="head"><p>Meaning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>x1</p></td>
<td><p>lower x limit</p></td>
</tr>
<tr class="row-odd"><td><p>x2</p></td>
<td><p>upper x limit</p></td>
</tr>
<tr class="row-even"><td><p>y1</p></td>
<td><p>lower y limit</p></td>
</tr>
<tr class="row-odd"><td><p>y2</p></td>
<td><p>upper y limit</p></td>
</tr>
</tbody>
</table>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>sel</strong><span class="classifier">masked array for the bin_content</span></dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="LT.box.histo2d.save">
<code class="sig-name descname">save</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filename</span><span class="o">=</span><span class="default_value">'histo2d.data'</span></em>, <em class="sig-param"><span class="n">ignore_zeros</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#LT.box.histo2d.save" title="Permalink to this definition">¶</a></dt>
<dd><p>Save the histogram in <a class="reference internal" href="lt_pdatafile.html#module-LT.pdatafile" title="LT.pdatafile"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pdatafile</span></code></a> format</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 16%" />
<col style="width: 84%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Keyword</p></th>
<th class="head"><p>Meaning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>filename:</p></td>
<td><p>filename to be used</p></td>
</tr>
<tr class="row-odd"><td><p>ignore_zeros</p></td>
<td><p>if True, write only bins with non-zero content (default True)</p></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="py method">
<dt id="LT.box.histo2d.set_nans">
<code class="sig-name descname">set_nans</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span><span class="o">=</span><span class="default_value">0.0</span></em>, <em class="sig-param"><span class="n">err_value</span><span class="o">=</span><span class="default_value">1.0</span></em><span class="sig-paren">)</span><a class="headerlink" href="#LT.box.histo2d.set_nans" title="Permalink to this definition">¶</a></dt>
<dd><p>replace nans by specified values</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 18%" />
<col style="width: 82%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Keyword</p></th>
<th class="head"><p>Meaning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>value</p></td>
<td><p>replaces the nan in bin_content (default 0)</p></td>
</tr>
<tr class="row-odd"><td><p>err_value</p></td>
<td><p>replaces the corresponding bin_error (default 1)</p></td>
</tr>
</tbody>
</table>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><dl class="simple">
<dt>None.</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="LT.box.histo2d.sum">
<code class="sig-name descname">sum</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">rect_cut</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">poly_cut</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">draw</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#LT.box.histo2d.sum" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the sum of all bins. If the limits are of a rectangle  are given, 
calculate the sum of all bins inside it or inside a polygon poly</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">s0</span> <span class="o">=</span> <span class="n">h</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="c1"># add all bins</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s1</span> <span class="o">=</span> <span class="n">h</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">rect</span> <span class="o">=</span> <span class="p">[</span><span class="n">x1</span><span class="p">,</span><span class="n">x2</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">y2</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s2</span> <span class="o">=</span> <span class="n">h</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">poly</span> <span class="o">=</span> <span class="p">([</span><span class="n">x1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="o">...</span><span class="p">],</span> <span class="p">[</span><span class="n">y1</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="o">...</span><span class="p">]))</span> <span class="c1"># add the bins inside the polygon</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 18%" />
<col style="width: 82%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Keyword</p></th>
<th class="head"><p>Meaning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>xmin</p></td>
<td><p>lower limit of sum of bin content</p></td>
</tr>
<tr class="row-odd"><td><p>xmax</p></td>
<td><p>upper limit of sum</p></td>
</tr>
</tbody>
</table>
<p>The errors are also calculated.</p>
</dd></dl>

</dd></dl>

<div class="section" id="histogram-operations">
<h2>Histogram Operations<a class="headerlink" href="#histogram-operations" title="Permalink to this headline">¶</a></h2>
<p>The following operations are defined for Histograms (1-D and 2-D)
(<a class="reference internal" href="#LT.box.histo" title="LT.box.histo"><code class="xref py py-class docutils literal notranslate"><span class="pre">histo</span></code></a> ):</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">hr</span> <span class="o">=</span> <span class="n">h1</span> <span class="o">+</span> <span class="n">h2</span>        <span class="c1">#  addition</span>
<span class="gp">In [2]: </span><span class="n">hr</span> <span class="o">=</span> <span class="n">h1</span> <span class="o">-</span> <span class="n">h2</span>        <span class="c1"># subtraction</span>
<span class="gp">In [3]: </span><span class="n">hr</span> <span class="o">=</span> <span class="mf">2.</span><span class="o">*</span><span class="n">h1</span>          <span class="c1"># mutiplication by a number</span>
<span class="gp">In [4]: </span><span class="n">hr</span> <span class="o">=</span> <span class="mf">5.5</span><span class="o">*</span><span class="n">h1</span> <span class="o">-</span> <span class="mf">2.</span><span class="o">*</span><span class="n">h2</span> <span class="c1"># combination of the above</span>
</pre></div>
</div>
<dl class="simple">
<dt><strong>Note</strong>: When adding histograms they need to be of the same type (the</dt><dd><p>same number of bins, same bin-center values). Labels and titles are
not copied.</p>
</dd>
</dl>
</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">box</a><ul>
<li><a class="reference internal" href="#histogram-operations">Histogram Operations</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="../LT.html"
                        title="previous chapter">The LT Package</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="lt_datafile.html"
                        title="next chapter">datafile</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/src/lt_box.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="lt_datafile.html" title="datafile"
             >next</a> |</li>
        <li class="right" >
          <a href="../LT.html" title="The LT Package"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">LabTools3 1.1.3 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../LT.html" >The LT Package</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">box</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2011, Werner Boeglin.
      Last updated on Oct 01, 2020.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.1.2.
    </div>
  </body>
</html>